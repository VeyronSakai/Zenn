---
title: "GitHub Actions Manager(GAMA) ã‚’ä½¿ã£ã¦ workflow_dispatch.inputs ã®å€‹æ•°åˆ¶é™ã‚’å›é¿ã™ã‚‹"
emoji: "ğŸ’¬"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [githubactions]
published: true
---

## ã¯ã˜ã‚ã«

[GitHub Actions Manager (GAMA)](https://github.com/termkit/gama) ã¯ GitHub Actions ã® Workflow ã®ä¸€è¦§ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã«è¡¨ç¤ºã—ãŸã‚Šã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ Workflow ã‚’ç›´æ¥å®Ÿè¡Œã—ãŸã‚Šã§ãã‚‹ TUI ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

æœ¬è¨˜äº‹ã§ã¯ã¾ãš GAMA ã®ç´¹ä»‹ã•ã›ã¦é ‚ãã€ãã®å¾Œ GitHub Actions ã® workflow_dispatch.inputs ã®å€‹æ•°åˆ¶é™ã‚’ GAMA ã‚’ä½¿ã£ã¦å›é¿ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã•ã›ã¦é ‚ãã¾ã™ã€‚

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

ã“ã“ã§ã¯ Docker ã«ã‚ˆã‚‹å®Ÿè¡Œã‚’å‰æã¨ã—ãŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•ã‚’ã”èª¬æ˜ã„ãŸã—ã¾ã™ã€‚

### Personal Access Token ã®ç”Ÿæˆæ–¹æ³•

ã¾ãšã€å¿…è¦æœ€ä½é™ã® Permission ã‚’æŒã¤ Personal Access Token ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

1. [Fine-grained Token](https://github.com/settings/tokens?type=beta) ã«ç§»å‹•ã—ã€ã€ŒGenerate new tokenã€ã‚’é¸æŠã€‚
2. ä»¥ä¸‹ã®ã‚ˆã†ã«é©å®œé …ç›®ã‚’å…¥åŠ›ã—ã€ãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã®ã€ŒGenerate tokenã€ã‚’é¸æŠã€‚
   - ã€ŒRepository Accessã€ã¯ã€ŒAll repositoriesã€ã¾ãŸã¯ã€ŒOnly select repositoriesã€ã‚’é¸æŠã€‚
   - ã€ŒRepository Permissionsã€ã¯ã€ŒActionsã€ã€ŒContentsã€ã€ŒWorkflowsã€ã«ã¤ã„ã¦ãã‚Œãã‚Œä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã€‚
     - Actions: Read and write
     - Contents: Read-only
     - Workflows: Read and write

## GAMA ã‚’èµ·å‹•ã™ã‚‹

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œã—ã¾ã™ã€‚

```sh
docker run --rm -it --env GITHUB_TOKEN="<ç”Ÿæˆã—ãŸ Personal Access Token>" termkit/gama:latest
```

ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ã«åˆ‡ã‚Šæ›¿ã‚ã£ãŸã‚‰æˆåŠŸã§ã™[^1]ã€‚

![image1](/images/17850fa8d5af9d/image1.png)

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ shift ã¨å·¦å³ã®çŸ¢å°ã‚­ãƒ¼ã§ã‚¿ãƒ–ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚

ã‚­ãƒ¼è¨­å®šã¯ `~/.config/gama/config.yaml`ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚‹ã“ã¨ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹ã‚ˆã†ã§ã™ã€‚

```yaml
keys:
  switch_tab_right: shift+right
  switch_tab_left: shift+left
  quit: ctrl+c
  refresh: ctrl+r
  enter: enter
  tab: tab
```

ã¾ãŸã€ç”»é¢ä¸‹éƒ¨ã«æ“ä½œæ–¹æ³•ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€é€”ä¸­ã§æ“ä½œæ–¹æ³•ãŒåˆ†ã‹ã‚‰ãªããªã£ã¦å›°ã‚‹ã“ã¨ã¯ã‚ã¾ã‚Šãªã•ãã†ã§ã™ã€‚

[^1]: ã‚‚ã—ã€ŒTerminal window is too small. Please resize to at least 100x24ã€ã¨è¡¨ç¤ºã•ã‚ŒãŸå ´åˆã¯ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ã‚µã‚¤ã‚ºã‚’å¤§ããã—ã¦ã¿ã¦ãã ã•ã„ã€‚

## GAMA ã‚’ç”¨ã„ã¦ Workflow ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹

ã¨ã‚Šã‚ãˆãš GAMA ã‚’ç”¨ã„ã¦ Workflow ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚

### Workflow ã‚’ä½œæˆã™ã‚‹

å‰æº–å‚™ã¨ã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ãª Workflow ã‚’ä½œæˆã—ã¾ã™ã€‚

```yaml
name: SimpleGamaSandbox
on:
  workflow_dispatch:
    inputs:
      param1:
        type: string
        default: "param1"
        description: "Parameter 1"
      param2:
        type: string
        default: "param2"
        description: "Parameter 2"
      param3:
        type: string
        default: "param3"
        description: "Parameter 3"

jobs:
  main:
    runs-on: ubuntu-latest
    steps:
      - name: Echo parameters
        run: |
          echo "param1: ${{ github.event.inputs.param1 }}"
          echo "param2: ${{ github.event.inputs.param2 }}"
          echo "param3: ${{ github.event.inputs.param3 }}"
```

### Workflow ã‚’ Trigger ã™ã‚‹

#### å¯¾è±¡ã® Repository ã‚’é¸æŠã™ã‚‹

ã¾ãš Repository ã‚¿ãƒ–ã§å¯¾è±¡ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’åˆã‚ã›ã¾ã™[^2]ã€‚

![image3](/images/17850fa8d5af9d/image3.png)

ã¾ãŸã€æ¤œç´¢ã«ã‚‚å¯¾å¿œã—ã¦ã„ã‚‹ãŸã‚ Repository æ•°ãŒå¤šãã¦æ¢ã™ã®ãŒå¤§å¤‰ãªã¨ããªã©ã«ä¾¿åˆ©ãã†ã§ã™ã€‚

![image4](/images/17850fa8d5af9d/image4.png)

[^2]: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ä¸Šä¸‹ã®çŸ¢å°ã‚­ãƒ¼ã§ã‚«ãƒ¼ã‚½ãƒ«ã‚’æ“ä½œã§ãã¾ã™ã€‚

#### å¯¾è±¡ã® Workflow ã‚’é¸æŠã™ã‚‹

Workflow ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆã€å®Ÿè¡Œå¯¾è±¡ã® Workflow ã‚’é¸æŠã—ã¾ã™(ã‚«ãƒ¼ã‚½ãƒ«ã‚’åˆã‚ã›ã¾ã™)ã€‚

#### Trigger ã™ã‚‹

Trigger ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã¨ã€inputs ã§å®šç¾©ã—ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¯ GitHub ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œã™ã‚‹ã¨ãã¨åŒæ§˜ã« default ã®å€¤ã‚’ä¸Šæ›¸ãã§ãã¾ã™ã€‚

![image5](/images/17850fa8d5af9d/image5.png)

ãã—ã¦ tab ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ Trigger ãƒœã‚¿ãƒ³ãŒã‚ªãƒ¬ãƒ³ã‚¸è‰²ã¸ä»£ã‚ã‚Šé¸æŠçŠ¶æ…‹ã«ãªã‚Šã¾ã™ã€‚

![image6](/images/17850fa8d5af9d/image6.png)

ã“ã®çŠ¶æ…‹ã§ Enter ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ Workflow ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

å®Ÿè¡Œçµæœã®ãƒ­ã‚°ã¯ GAMA ä¸Šã§ã¯ç¢ºèªã§ããªã„ãŸã‚ã€GitHub ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ã¦ç¢ºèªã—ã¾ã™ã€‚

![image7](/images/17850fa8d5af9d/image7.png)

ä»¥ä¸Šã‚ˆã‚Š GAMA ã‚’ç”¨ã„ã¦ã¨ã‚Šã‚ãˆãš Workflow ã‚’ Trigger ã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã—ãŸã€‚

## workflow_dispatch.inputs ã®å€‹æ•°åˆ¶é™ã«ã¤ã„ã¦

GitHub Actions ã«ã¯ã€Œworkflow_dispatch.inputs ã¯ 10 å€‹ã¾ã§ã—ã‹å®šç¾©ã§ããªã„ã€ã¨ã„ã†å¤§ããªåˆ¶é™ãŒå­˜åœ¨ã—ã¾ã™ã€‚

GitHub Docs ã«ã‚‚ [The maximum number of top-level properties for inputs is 10.](https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#providing-inputs) ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚

å…·ä½“çš„ã« inputs ã‚’ 11 å€‹ä»¥ä¸Šå®šç¾©ã—ãŸå ´åˆã«ã©ã®ã‚ˆã†ãªç¾è±¡ãŒç™ºç”Ÿã™ã‚‹ã®ã‹è¦‹ã¦ã¿ã¾ã™ã€‚

ã¾ãšä»¥ä¸‹ã®ã‚ˆã†ãª inputs ã‚’ **11 å€‹**æŒã¤ Workflow ã‚’ä½œæˆã—ã€Repository ã® main ãƒ–ãƒ©ãƒ³ãƒã«å–ã‚Šè¾¼ã¿ã¾ã™ã€‚

```yml
name: TooManyInputsWorkflow
on:
  workflow_dispatch:
    inputs:
      param1:
        type: string
        default: "param1"
        description: "Parameter 1"
      param2:
        type: string
        default: "param2"
        description: "Parameter 2"
      param3:
        type: string
        default: "param3"
        description: "Parameter 3"
      param4:
        type: string
        default: "param4"
        description: "Parameter 4"
      param5:
        type: string
        default: "param5"
        description: "Parameter 5"
      param6:
        type: string
        default: "param6"
        description: "Parameter 6"
      param7:
        type: string
        default: "param7"
        description: "Parameter 7"
      param8:
        type: string
        default: "param8"
        description: "Parameter 8"
      param9:
        type: string
        default: "param9"
        description: "Parameter 9"
      param10:
        type: string
        default: "param10"
        description: "Parameter 10"
      param11:
        type: string
        default: "param11"
        description: "Parameter 11"

jobs:
  main:
    runs-on: ubuntu-latest
    steps:
      - name: Echo parameters
        run: |
          echo "param1: ${{ github.event.inputs.param1 }}"
          echo "param2: ${{ github.event.inputs.param2 }}"
          echo "param3: ${{ github.event.inputs.param3 }}"
          echo "param4: ${{ github.event.inputs.param4 }}"
          echo "param5: ${{ github.event.inputs.param5 }}"
          echo "param6: ${{ github.event.inputs.param6 }}"
          echo "param7: ${{ github.event.inputs.param7 }}"
          echo "param8: ${{ github.event.inputs.param8 }}"
          echo "param9: ${{ github.event.inputs.param9 }}"
          echo "param10: ${{ github.event.inputs.param10 }}"
          echo "param11: ${{ github.event.inputs.param11 }}"
```

ã™ã‚‹ã¨ã€GitHub ä¸Šã§ã€€"you may only define up to 10 `inputs` for a `workflow_dispatch` event" ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ãŠã‚Šã€Workflow ã‚‚å®Ÿè¡Œã§ããªã„ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚

![image8](/images/17850fa8d5af9d/image8.png)

ã¡ãªã¿ã« [workflow_dispatch max inputs from 10 to 25](https://github.com/orgs/community/discussions/8774)ã€€ã«ã¦ 2 å¹´ä»¥ä¸Šå‰ã«ã“ã®åˆ¶é™ã‚’ç·©å’Œã—ã¦æ¬²ã—ã„ã¨ã„ã†æ—¨ã®è¦æœ›ãŒä¸ŠãŒã£ã¦ã„ã¾ã™ã€‚ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®å¤šã•ã‚’è¦‹ã‚‹ã¨ã‚„ã¯ã‚Šå¤šãã®æ–¹ãŒå›°ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

## GAMA ã‚’ç”¨ã„ã¦ workflow_dispatch.inputs ã®å€‹æ•°åˆ¶é™ã‚’å›é¿ã™ã‚‹

workflow_dispatch.inputs ã®å€‹æ•°åˆ¶é™ã‚’å›é¿ã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã€Œã‚°ãƒ«ãƒ¼ãƒ—åŒ–å¯èƒ½ãª inputs ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ‡ã‚Šå‡ºã™ã“ã¨ã§ inputs ã®å€‹æ•°ã‚’æ¸›ã‚‰ã—ã¦ä½•ã¨ã‹ 10 å€‹ä»¥å†…ã«åã‚ã‚‹ã€ã¨ã„ã†æ–¹æ³•ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

ã—ã‹ã—ã“ã®æ–¹æ³•ã§ã¯ã‚°ãƒ«ãƒ¼ãƒ—ä¸å¯èƒ½ãª inputs ã®å€‹æ•°ãŒ 11 å€‹ä»¥ä¸Šå­˜åœ¨ã™ã‚‹å ´åˆã«å¯¾å¿œã§ãã¾ã›ã‚“ã€‚

ãã“ã§ [ä¸Šè¿°ã—ãŸ Discussion](https://github.com/orgs/community/discussions/8774#discussioncomment-8031130) ã«ã¦ GAMA ã®ä½œè€…ã®æ–¹ãŒ GAMA ã‚’ç”¨ã„ã¦ã“ã®å€‹æ•°åˆ¶é™ã‚’å›é¿ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ã„ã¾ã™ã€‚

ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹æ–¹æ³•ã‚’å®Ÿéš›ã«è©¦ã—ã¦ã¿ã¾ã™ã€‚ã¾ãšã¯ä»¥ä¸‹ã®ã‚ˆã†ãª 20 å€‹ã®ã‚­ãƒ¼ã‚’æŒã¤ JSON ã® string ã‚’ default å€¤ã¨ã—ã¦æŒã¤ inputs ãŒå­˜åœ¨ã™ã‚‹ Workflow ã‚’ä½œæˆã—ã€main ãƒ–ãƒ©ãƒ³ãƒã«å–ã‚Šè¾¼ã¿ã¾ã™ã€‚

```yml
name: GamaManyInputsSandbox
on:
  workflow_dispatch:
    inputs:
      parameters:
        description: "JSON Parameters"
        required: true
        default: '{
          "param01": "Paramter 1",
          "param02": "Paramter 2",
          "param03": "Paramter 3",
          "param04": "Paramter 4",
          "param05": "Paramter 5",
          "param06": "Paramter 6",
          "param07": "Paramter 7",
          "param08": "Paramter 8",
          "param09": "Paramter 9",
          "param10": "Paramter 10",
          "param11": "Paramter 11",
          "param12": "Paramter 12",
          "param13": "Paramter 13",
          "param14": "Paramter 14",
          "param15": "Paramter 15",
          "param16": "Paramter 16",
          "param17": "Paramter 17",
          "param18": "Paramter 18",
          "param19": "Paramter 19",
          "param20": "Paramter 20"
          }'

jobs:
  echo:
    runs-on: ubuntu-latest
    steps:
      - name: Echo parameters
        run: |
          echo ${{ fromJson(inputs.parameters).param01 }}
          echo ${{ fromJson(inputs.parameters).param02 }}
          echo ${{ fromJson(inputs.parameters).param03 }}
          echo ${{ fromJson(inputs.parameters).param04 }}
          echo ${{ fromJson(inputs.parameters).param05 }}
          echo ${{ fromJson(inputs.parameters).param06 }}
          echo ${{ fromJson(inputs.parameters).param07 }}
          echo ${{ fromJson(inputs.parameters).param08 }}
          echo ${{ fromJson(inputs.parameters).param09 }}
          echo ${{ fromJson(inputs.parameters).param10 }}
          echo ${{ fromJson(inputs.parameters).param11 }}
          echo ${{ fromJson(inputs.parameters).param12 }}
          echo ${{ fromJson(inputs.parameters).param13 }}
          echo ${{ fromJson(inputs.parameters).param14 }}
          echo ${{ fromJson(inputs.parameters).param15 }}
          echo ${{ fromJson(inputs.parameters).param16 }}
          echo ${{ fromJson(inputs.parameters).param17 }}
          echo ${{ fromJson(inputs.parameters).param18 }}
          echo ${{ fromJson(inputs.parameters).param19 }}
          echo ${{ fromJson(inputs.parameters).param20 }}
```

ã“ã® Workflow ã‚’ GAMA ã§é–²è¦§ã™ã‚‹ã¨ã¾ã‚‹ã§æ™®é€šã« inputs ã‚’ 20 å€‹å®šç¾©ã—ãŸã‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

![image9](/images/17850fa8d5af9d/image9.png)

ãã‚Œãã‚Œæ™®é€šã« inputs ã‚’å®šç¾©ã—ãŸæ™‚ã¨åŒæ§˜ã«ç·¨é›†ã§ãã¾ã™ã€‚

![image10](/images/17850fa8d5af9d/image10.png)

ã“ã® Workflow ã‚’ GAMA ã‹ã‚‰ Trigger ã—ã€çµæœã‚’ GitHub ä¸Šã§ç¢ºèªã™ã‚‹ã¨æ­£å¸¸ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ãŒæ¸¡ã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã™ã€‚

![image11](/images/17850fa8d5af9d/image11.png)

ä»¥ä¸Šã«ã‚ˆã‚Šã€GAMA ã‚’ç”¨ã„ã‚Œã° workflow_dispatch.inputs ã®å€‹æ•°åˆ¶é™ã‚’å›é¿ã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã¾ã—ãŸã€‚

## ã¾ã¨ã‚

æœ¬è¨˜äº‹ã§ã¯ GAMA ã®åŸºæœ¬çš„ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ä½¿ç”¨æ–¹æ³•ã¨ã€GAMA ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ workflow_dispatch.inputs ã®å€‹æ•°åˆ¶é™ã‚’å›é¿ã§ãã‚‹ã“ã¨ã‚’è§£èª¬ã—ã¾ã—ãŸã€‚

workflow_dispatch.inputs ã®å€‹æ•°åˆ¶é™ã«é–¢ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹é‡ã§ä½•ã¨ã‹ GitHub å´ã«å€‹æ•°åˆ¶é™ã‚’ç·©å’Œã—ã¦ã‚‚ã‚‰ã†ã¾ã§è€ãˆã‚‹ã€ã¨ã„ã†ã®ãŒæœ€å–„ç­–ãªã®ã§ã¯ãªã„ã‹ã¨ç§ã¯è€ƒãˆã¦ãŠã‚Šã¾ã™ã€‚

1. ã‚°ãƒ«ãƒ¼ãƒ—åŒ–å¯èƒ½ãª inputs ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¦å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ‡ã‚Šå‡ºã—ã¦ inputs ã®å€‹æ•°ã‚’ 10 å€‹ä»¥å†…ã«åã‚ã‚‹ã€‚
2. 1 ã‚’è¡Œã£ã¦ã‚‚ 10 å€‹ä»¥å†…ã«åã¾ã‚‰ãªã„ Workflow ã«é–¢ã—ã¦ã¯ GAMA ãªã©ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ Trigger ã™ã‚‹(ã¨ã„ã†é‹ç”¨ã«ã™ã‚‹)ã€‚

ä»¥ä¸Šã¨ãªã‚Šã¾ã™ã€‚ã“ã“ã¾ã§èª­ã‚“ã§é ‚ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚
