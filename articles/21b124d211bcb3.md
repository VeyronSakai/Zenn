---
title: "game-ci/unity-test-runner ã«ã‚ˆã‚‹ Unity Test ã®å®Ÿè¡Œæ™‚ã« Docker Image ãŒè¦‹ã¤ã‹ã‚‰ãªãã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹"
emoji: "ğŸ“‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---

## ã¯ã˜ã‚ã«

game-ci/unity-test-runner ã‚’ç”¨ã„ã¦ GitHub Actions ã§ Unity ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ãŸéš›ã«ç§ãŒå®Ÿéš›ã«é­é‡ã—ãŸã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•ã«ã¤ã„ã¦è¨˜è¼‰ã—ã¾ã—ãŸã€‚

## ç­†è€…ã®ç’°å¢ƒ

- Unity 2022.3.9f1

## é­é‡ã—ãŸå•é¡Œ

ãƒ†ã‚¹ãƒˆã«ä½¿ç”¨ã—ãŸ workflow ã¯ãŠãŠã‚ˆãä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã§ã™ã€‚(é–¢ä¿‚ã®ç„¡ã„éƒ¨åˆ†ã¯çœç•¥ã—ã¦ã„ã¾ã™)

```yml
name: Test
on:
  pull_request:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: game-ci/unity-test-runner@v2
        env:
          UNITY_LICENSE: ${{ secrets.UNITY_LICENSE }}
```

ã“ã® workflow ã‚’å®Ÿè¡Œã—ãŸã¨ã“ã‚ã€game-ci/unity-test-runner ã® step ã§ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚

```log

Unable to find image 'unityci/editor:ubuntu-2022.3.9f1-linux-il2cpp-1' locally
docker: Error response from daemon: manifest for unityci/editor:ubuntu-2022.3.9f1-linux-il2cpp-1 not found: manifest unknown: manifest unknown.
See 'docker run --help'.
Error: The process '/usr/bin/docker' failed with exit code 125

```

'unityci/editor:ubuntu-2022.3.9f1-linux-il2cpp-1' ã® Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã€ã¨ã„ã†å†…å®¹ã®ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚

## åŸå› 

game-ci/unity-test-runner@v2 ã§ã¯

https://github.com/game-ci/unity-test-runner/blob/7787abf249f862fc18ae187bd2ca1740a7990dc9/src/model/image-tag.ts#L34

ã“ã“ã® `imageRollingVersion` ãŒ 1 ãªã®ã§ã€`ubuntu-2022.3.9f1-linux-il2cpp-1` ã®ã‚¿ã‚°ãŒä»˜ã„ãŸ Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å–å¾—ã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚

ã—ã‹ã—ã€Docker Hub ã«ã¯

![](https://storage.googleapis.com/zenn-user-upload/1e7ae1a3444d-20230918.png)

- `ubuntu-2022.3.9f1-linux-il2cpp-2`
- `ubuntu-2022.3.9f1-linux-il2cpp-2.0`
- `ubuntu-2022.3.9f1-linux-il2cpp-2.0.0`

ã“ã‚Œã‚‰ã®ã‚ˆã†ã« `2` ãŒä»˜ã„ãŸã‚¿ã‚°ã¯å­˜åœ¨ã™ã‚‹ã‚‚ã®ã®ã€`1` ã¯å­˜åœ¨ã—ãªã„ãŸã‚ã€å¯¾è±¡ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã®å–å¾—ã«å¤±æ•—ã—ã¦ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

## è§£æ±ºæ–¹æ³•

game-ci/unity-test-runner ã® v3 ã‚’ä½¿ã†ã“ã¨ã§è§£æ±ºã—ã¾ã—ãŸã€‚
(v3 ã§ã¯ `imageRollingVersion` ãŒ2ã«ãªã‚Šã¾ã™)

```yml
name: Test
on:
  pull_request:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: game-ci/unity-test-runner@v3
        env:
          UNITY_LICENSE: ${{ secrets.UNITY_LICENSE }}
```

ã¡ãªã¿ã« Unity 2022.3.8 ã§ã‚‚åŒæ§˜ã§ã€v3 ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
