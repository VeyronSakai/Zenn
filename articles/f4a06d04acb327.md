---
title: "foreach ã®ãƒ«ãƒ¼ãƒ—ã‚’ LINQ ã«å¤‰æ›ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã™ã‚‹ ReSharper ã® Hint ã‚’ .editorconfig ã§ç„¡åŠ¹åŒ–ã™ã‚‹"
emoji: "ğŸ“Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [csharp]
published: true
---

## ã¯ã˜ã‚ã«

```cs
private static bool HasConstructorWithPreserveAttribute(INamedTypeSymbol type)
{
    foreach (var constructor in type.Constructors)
    {
        foreach (var attribute in constructor.GetAttributes())
        {
            if (attribute.AttributeClass.IsPreserveAttribute())
            {
                return true;
            }
        }
    }
    return false;
}
```

ä¸Šè¨˜ã®ã‚ˆã†ãª C# ã®ã‚³ãƒ¼ãƒ‰ã‚’ Rider ä¸Šã§è¨˜è¿°ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã« foreach ã®ãƒ«ãƒ¼ãƒ—ã‚’ LINQ ã‚’ä½¿ã£ãŸå¼ã«å¤‰æ›ã™ã‚‹ææ¡ˆãŒãªã•ã‚Œã¾ã™ã€‚

![image_0](/images/f4a06d04acb327/image_0.png)

ãã—ã¦ Context Action ã«è¡¨ç¤ºã•ã‚Œã‚‹ã€ŒConvert into LINQ-Expressionã€ã‚’å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ãŒå¤‰æ›ã•ã‚Œã¾ã™ã€‚

```cs
private static bool HasConstructorWithPreserveAttribute(INamedTypeSymbol type)
{
    return type.Constructors.SelectMany(constructor => constructor.GetAttributes()).Any(attribute => attribute.AttributeClass.IsPreserveAttribute());
}
```

ã©ã¡ã‚‰ã®æ–¹ãŒè‰¯ã„ã‹ã¯ç½®ã„ã¦ãŠã„ã¦ã€ã“ã® ReSharper ã‹ã‚‰ã® Hint ãŒè¡¨ç¤ºã•ã‚Œãªããªã‚‹ã‚ˆã†ãª .editorconfig ã®è¨˜è¿°æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

## æ–¹æ³•

ä»¥ä¸‹ã®ã‚ˆã†ã« C# ã®ã‚³ãƒ¼ãƒ‰ã‚’å¯¾è±¡ã« `resharper_foreach_can_be_converted_to_query_using_another_get_enumerator_highlighting` ã‚’ `none` ã«è¨­å®šã™ã‚‹ã ã‘ã§å®Ÿç¾ã§ãã¾ã™ã€‚

```.editorconfig
[*.cs]
resharper_foreach_can_be_converted_to_query_using_another_get_enumerator_highlighting = none
```

## å‚è€ƒ

- [Code Inspections in C# | JetBrains Rider Documentation](https://www.jetbrains.com/help/rider/Reference__Code_Inspections_CSHARP.html)
